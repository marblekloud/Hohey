(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{111:function(e,t,n){},15:function(e,t,n){e.exports={listpage:"mystyle_listpage__6uExV",videoplayer:"mystyle_videoplayer__34qZu",ListImage:"mystyle_ListImage__19BmL",UploadPage:"mystyle_UploadPage__1vcxK",Recent:"mystyle_Recent__Wi5bl",Upload:"mystyle_Upload__E6wNO",ImageBox:"mystyle_ImageBox__JahK9",Recent_Title:"mystyle_Recent_Title__3qpeR",ListImage__Delete:"mystyle_ListImage__Delete__EPLrN",ListPage__Title:"mystyle_ListPage__Title__2nNsO",Upload_Title:"mystyle_Upload_Title__t1veT",CaptionBox:"mystyle_CaptionBox__1g3Iq",ImageBox__Caption:"mystyle_ImageBox__Caption__3H3BY",Upload__InputSection:"mystyle_Upload__InputSection__2KL8z",Upload__Button:"mystyle_Upload__Button__WvXa1",bannerheading:"mystyle_bannerheading__2awb4",bannercontents:"mystyle_bannercontents__1jxrl",banner:"mystyle_banner__RMMmF",bannercontainer:"mystyle_bannercontainer__67gZb",bannercontainerreal:"mystyle_bannercontainerreal__15FNf",videoTitle:"mystyle_videoTitle__2BEGC",videoDescription:"mystyle_videoDescription__1kyiS",videolist:"mystyle_videolist__1cUMm",Date:"mystyle_Date__2CvNx",Upload__Caption:"mystyle_Upload__Caption__pV4zX",Upload__Description:"mystyle_Upload__Description__18Qfj"}},264:function(e,t,n){},277:function(e,t,n){},307:function(e,t){},327:function(e,t){},329:function(e,t){},453:function(e,t){},455:function(e,t){},464:function(e,t){},466:function(e,t){},491:function(e,t){},496:function(e,t){},498:function(e,t){},505:function(e,t){},518:function(e,t){},541:function(e,t){},638:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n.n(a),i=n(267),r=n.n(i),s=(n(277),n(1)),o=n(4),l=n(8),u=n(7),d=(n(111),n(29)),p=n.n(d),j=n(15),b=n.n(j),m=n(3),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.fetchRecent()},a.fetchRecent=function(){p.a.get("/api/recent").then((function(e){a.setState({recentImage:e.data.image})})).catch((function(e){return alert("Error: "+e)}))},a.uploadImage=function(){if(!a.state.uploadedImage.name)return alert("Video is missing");if(!a.state.caption.trim())return alert("Video title is missing");if(!a.state.description.trim())return alert("Video description is missing");var e=new FormData;e.append("caption",a.state.caption),e.append("description",a.state.description),e.append("file",a.state.uploadedImage),p.a.post("/api/",e).then((function(e){e.data.success,alert(e.data.message),a.fetchRecent()})).catch((function(e){return alert("Error: "+e)}))},a.state={recentImage:{},caption:"",description:"",uploadedImageUrl:"",uploadedImage:{}},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:b.a.UploadPage,children:[Object(m.jsx)("p",{className:b.a.Upload_Title,children:"Upload Video"}),Object(m.jsxs)("div",{className:b.a.Upload__InputSection,children:[Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"text",className:b.a.Upload__Caption,placeholder:"Enter video title...",onChange:function(t){return e.setState({caption:t.target.value})},value:this.state.caption})}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsx)("textarea",{className:b.a.Upload__Description,placeholder:"Enter video description...",onChange:function(t){return e.setState({description:t.target.value})},value:this.state.description})}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"file",className:"Upload__Input",onChange:function(t){e.setState({uploadedImageUrl:URL.createObjectURL(t.target.files[0]),uploadedImage:t.target.files[0]})}})]}),Object(m.jsx)("button",{onClick:this.uploadImage,className:b.a.Upload__Button,children:"Upload"})]})}}]),n}(a.PureComponent),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){p.a.get("/api/").then((function(e){a.setState({imageList:e.data.images})})).catch((function(e){return alert(e)}))},a.deleteFile=function(e){p.a.get("/api/delete/"+e).then((function(t){t.data.success&&(alert("Video with ID: "+e+" has been deleted"),a.setState({imageList:a.state.imageList.filter((function(t){return t._id!==e}))}))})).catch((function(e){return alert(e)}))},a.state={imageList:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:b.a.banner,children:[Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:b.a.bannercontainer,children:Object(m.jsxs)("div",{className:b.a.bannercontainerreal,children:[Object(m.jsx)("p",{className:b.a.bannerheading,children:"HoHey"}),Object(m.jsx)("p",{className:b.a.bannercontents,children:"HoHey is where your film assets are preserved, displayed, and celebrated - all the while you earn passive income."})]})})]}),Object(m.jsx)("div",{className:"ListPage",children:Object(m.jsx)("div",{className:b.a.listpage,children:this.state.imageList.map((function(t){return Object(m.jsxs)("div",{className:b.a.ListImage,children:[Object(m.jsx)("video",{src:"/api/image/"+t.filename,className:"ListImage__Image",width:"320",height:"180",controls:!0}),Object(m.jsx)("p",{className:b.a.ImageBox__Caption,children:t.caption}),Object(m.jsxs)("p",{className:"ListImage__Date",children:["Date: ",t.createdAt]}),Object(m.jsx)("button",{className:b.a.ListImage__Delete,onClick:function(){return e.deleteFile(t._id)},children:"Delete"})]})}))})})]})}}]),n}(a.PureComponent),_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.fetchVideo(window.location.href.split("/video/").pop()),p.a.get("/api/").then((function(e){a.setState({imageList:e.data.images})})).catch((function(e){return alert(e)}))},a.fetchVideo=function(e){p.a.get("/api/video/"+e).then((function(e){a.setState({currentVideo:e.data.image}),a.setState({currentVideoDate:e.data.image.createdAt.slice(0,-14)}),a.setState({currentVideoTime:e.data.image.createdAt.slice(11,-5)})})).catch((function(e){return alert("Error: "+e)}))},a.state={currentVideo:{},currentVideoDate:"",currentVideoTime:"",imageList:[]},a}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:b.a.Recent,children:[Object(m.jsx)("video",{src:"/api/image/"+this.state.currentVideo.filename,className:"videoplayer",width:"960",height:"600",controls:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("b",{className:b.a.videoTitle,children:this.state.currentVideo.caption}),Object(m.jsx)("b",{className:b.a.Date,children:this.state.currentVideoDate+"  "}),Object(m.jsx)("b",{children:this.state.currentVideoTime}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{className:b.a.videoDescription,children:this.state.currentVideo.description})]})]}),Object(m.jsx)("div",{className:b.a.videolist,children:this.state.imageList.map((function(e){return Object(m.jsxs)("div",{className:b.a.ListImage,children:[Object(m.jsx)("a",{href:"/video/"+e.filename,children:Object(m.jsx)("img",{src:"/api/image/"+e.filename,className:"ListImage__Image",width:"320",height:"180"})}),Object(m.jsx)("p",{className:b.a.ImageBox__Caption,children:e.caption}),Object(m.jsxs)("p",{className:"ListImage__Date",children:["Date: ",e.createdAt]})]})}))})]})}}]),n}(a.PureComponent),O=n(16),v=n.n(O),g=n(56),x=n(21),y=n(109);var I=function(e){var t=Object(a.useState)({pending:!1,error:null,data:null}),n=Object(y.a)(t,2),c=n[0],i=n[1];function r(){return(r=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i((function(e){return Object(x.a)(Object(x.a)({},e),{},{pending:!0,data:null,error:null})})),t.prev=1,t.next=4,e(n);case 4:return a=t.sent,i((function(e){return Object(x.a)(Object(x.a)({},e),{},{pending:!1,data:a})})),t.abrupt("return",{data:a});case 9:return t.prev=9,t.t0=t.catch(1),i((function(e){return Object(x.a)(Object(x.a)({},e),{},{pending:!1,error:t.t0})})),t.abrupt("return",{error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return Object(x.a)(Object(x.a)({},c),{},{call:function(e){return r.apply(this,arguments)}})},w=n(268),N=n.n(w);function U(){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(v.a.mark((function e(){var t,n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,n=t.ethereum){e.next=3;break}throw new Error("Web3 not found");case 3:return a=new N.a(n),e.next=6,n.enable();case 6:return e.next=8,a.eth.getAccounts();case 8:return c=e.sent,e.abrupt("return",{web3:a,account:c[0]||""});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D={account:"",web3:null,netId:0},L="UPDATE_ACCOUNT",T="UPDATE_NET_ID";function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:var n=t.web3||e.web3,a=t.account;return Object(x.a)(Object(x.a)({},e),{},{web3:n,account:a});case T:var c=t.netId;return Object(x.a)(Object(x.a)({},e),{},{netId:c});default:return e}}var k=Object(a.createContext)({state:D,updateAccount:function(e){},updateNetId:function(e){}});function E(){return Object(a.useContext)(k)}var S=function(e){var t=e.children,n=Object(a.useReducer)(V,D),c=Object(y.a)(n,2),i=c[0],r=c[1];function s(e){r(Object(x.a)({type:L},e))}function o(e){r(Object(x.a)({type:T},e))}return Object(m.jsx)(k.Provider,{value:Object(a.useMemo)((function(){return{state:i,updateAccount:s,updateNetId:o}}),[i]),children:t})};function B(){var e=E(),t=e.state,n=e.updateNetId;return Object(a.useEffect)((function(){if(t.web3)return function(e,t){var n=setInterval(Object(g.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.eth.getAccounts();case 3:a=n.sent,t(null,a[0]),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(n.t0,null);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),1e3);return function(){clearInterval(n)}}(t.web3,(function(e,n){e&&console.error(e),void 0!==n&&n!==t.account&&window.location.reload()}))}),[t.web3,t.account]),Object(a.useEffect)((function(){if(t.web3)return function(e,t){var n=setInterval(Object(g.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.eth.net.getId();case 3:a=n.sent,t(null,a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(n.t0,null);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),1e3);return function(){clearInterval(n)}}(t.web3,(function(e,a){e&&console.error(e),a&&(0===t.netId?n({netId:a}):a!==t.netId&&window.location.reload())}))}),[t.web3,t.netId,n]),null}n(630),n(264);var A=function(){function e(e){var t=new FormData;t.append("MMaccount",e),p.a.post("/api/user",t).then((function(e){e.data.success,alert(e.data.message)})).catch((function(e){return alert("Error: "+e)}))}var t=E(),n=t.state.account,a=t.updateAccount,c=I(U),i=(c.pending,c.error,c.call);function r(){return(r=Object(g.a)(v.a.mark((function t(){var c,r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(null);case 2:c=t.sent,r=c.error,s=c.data,r&&(console.error(r),window.location.href="https://metamask.io/download.html"),s&&(a(s),e({account:n}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("div",{className:"App-header",children:[Object(m.jsx)("br",{}),Object(m.jsxs)("p",{onChange:function(){return e({account:n})},className:"address",children:["Account address: ",n]}),Object(m.jsx)("button",{className:"button",onClick:function(){return function(){return r.apply(this,arguments)}()},children:"Connect to Metamask"})]})})},P=n(80),R=n.p+"static/media/icon.425bbe5c.png";var F=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"topnav",children:[Object(m.jsx)("img",{className:"icon",src:R,alt:"Hohey"}),Object(m.jsx)("li",{className:"list",children:Object(m.jsx)(P.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{className:"list",children:Object(m.jsx)(P.b,{to:"/upload",children:"Upload video"})}),Object(m.jsx)("li",{className:"listright",children:Object(m.jsx)(P.b,{to:"/connectwallet",children:"Connect wallet"})})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,642)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},H=n(17),q=[{filename:""}];p.a.get("/api/").then((function(e){q.push({filename:e.data.images.filename})})).catch((function(e){return alert(e)})),r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P.a,{children:Object(m.jsxs)(S,{children:[Object(m.jsx)(F,{}),Object(m.jsxs)(H.c,{children:[q.map((function(e){return Object(m.jsx)(H.a,{path:"/video/"+e.filename,component:_})})),Object(m.jsx)(H.a,{path:"/connectwallet",component:A}),Object(m.jsx)(H.a,{path:"/upload",component:h}),Object(m.jsx)(H.a,{path:"/",component:f})]}),Object(m.jsx)(B,{})]})})}),document.getElementById("root")),M()}},[[638,1,2]]]);
//# sourceMappingURL=main.66e114ce.chunk.js.map